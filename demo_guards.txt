# Demonstration of Write Evaluation Layer
# PROPOSE → SIMULATE → DECIDE lifecycle

# 1. Define guard constraints
GUARD ADD RANGE_INT price_guard price* 0 10000
GUARD ADD ENUM status_guard status active,inactive,pending,archived
GUARD ADD LENGTH description_guard description* 10 200

# 2. List all guards
GUARD LIST

# 3. Test ACCEPT scenario
PROPOSE SET price_usd 500
SET price_usd 500

# 4. Test COUNTER_OFFER scenario (out of range)
PROPOSE SET price_usd 50000

# 5. Test COUNTER_OFFER scenario (case mismatch)
PROPOSE SET status ACTIVE

# 6. Test COUNTER_OFFER scenario (length violation)
PROPOSE SET description_main "Short"

# 7. Test COUNTER_OFFER scenario (truncation needed)
PROPOSE SET description_main "This is an extremely long description that definitely exceeds the maximum allowed length of 200 characters and will need to be truncated or rejected by the guard system to maintain data integrity"

# 8. Successful writes after evaluation
SET status active
SET description_main "This is a properly sized description that fits within constraints"

# 9. View results
HISTORY price_usd
HISTORY status
HISTORY description_main

EXIT

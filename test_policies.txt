# Test Decision Policies
# This script demonstrates how different decision policies handle guard violations

# Setup: Add a range guard for testing
GUARD ADD RANGE_INT score_guard score* 0 100

# Test 1: SAFE_DEFAULT Policy (default)
POLICY GET
PROPOSE SET score 150
# Expected: REJECT (no alternatives for out-of-range value)

PROPOSE SET score 42
# Expected: ACCEPT (value within range)

# Test 2: DEV_FRIENDLY Policy
POLICY SET DEV_FRIENDLY
POLICY GET
PROPOSE SET score 150
# Expected: COUNTER_OFFER with alternatives (policy always negotiates)

PROPOSE SET score 42
# Expected: ACCEPT (value within range)

# Test 3: STRICT Policy
POLICY SET STRICT
POLICY GET
PROPOSE SET score 150
# Expected: REJECT (policy rejects all violations, no alternatives)

PROPOSE SET score 42
# Expected: ACCEPT (value within range, no violation)

# Test 4: Complex scenario with enum guard
GUARD ADD ENUM env_guard env* development,staging,production

POLICY SET SAFE_DEFAULT
PROPOSE SET env invalid_env
# Expected: COUNTER_OFFER (has alternatives: development, staging, production)

POLICY SET STRICT
PROPOSE SET env invalid_env
# Expected: REJECT (strict policy rejects, no alternatives shown)

POLICY SET DEV_FRIENDLY
PROPOSE SET env invalid_env
# Expected: COUNTER_OFFER (dev-friendly shows alternatives)

# Test 5: Length guard scenario
GUARD ADD LENGTH name_guard name* 3 20

POLICY SET SAFE_DEFAULT
PROPOSE SET name ab
# Expected: Could be COUNTER_OFFER if alternatives exist, or REJECT if not

POLICY SET STRICT
PROPOSE SET name ab
# Expected: REJECT (too short, strict policy)

POLICY SET DEV_FRIENDLY
PROPOSE SET name ab
# Expected: COUNTER_OFFER or REJECT based on if alternatives can be generated

# Reset to default
POLICY SET SAFE_DEFAULT
POLICY GET

EXIT
